<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>詐欺に関するフォーム</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
@font-face {
  font-family: 'Tsunagi-gothic';
  src: url('TsunagiGothic-Black.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

body {
  font-family: 'Tsunagi-gothic', sans-serif;
  padding: 2rem;
  background: #fff;
  margin: 0;
  background: url('art.png') no-repeat center center; /* 背景画像指定 */
  background-size: cover; /* 画面サイズに合わせて拡大縮小 */
}
form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

label {
  font-weight: bold;
  display: inline-block; /* 背景を文字幅に合わせる */
  margin-bottom: 0.3rem;
  color: #000; /* 文字色は黒 */
  background-color: rgba(255, 255, 255, 0.6); /* 背景を半透明に */
  padding: 2px 6px; /* 文字と背景の余白 */
  border-radius: 4px; /* optional */
}
h2 {
  color: #000; 
  background-color: rgba(255, 255, 255, 0.6);
  display: inline-block;
  padding: 2px 6px;
  border-radius: 4px;
}

form > div {
  border: none;
  background: transparent;
  padding: 0.5rem 0; /* 文字との余白だけ確保 */
}

textarea, select, input[type="text"] {
  width: 100%;
  padding: 0.5rem;
  border-radius: 6px;
  border: 1px solid #ccc;
}

button {
  padding: 0.7rem;
  background: #000;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 700;
  transition: 0.3s;
}
button:hover { background: #333; }
button:disabled {
  background: #777;
  cursor: not-allowed;
}

/* --- トースト --- */
#toast {
  visibility: hidden;
  min-width: 260px;
  max-width: 90%;
  background: #4fa6c1;
  color: #fff;
  text-align: center;
  border-radius: 12px;
  padding: 12px 18px;
  position: fixed;
  left: 50%;
  bottom: -100px;
  transform: translateX(-50%);
  z-index: 10001;
  opacity: 0;
  transition: opacity 0.4s, bottom 0.4s;
  box-shadow: 0 10px 30px rgba(8,30,60,0.12);
  font-weight: 700;
}
#toast.show {
  visibility: visible;
  opacity: 1;
  bottom: 50%;
  transform: translate(-50%, 50%);
}

/* --- オーバーレイと広告 --- */

#overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 20000;
  padding: 1rem; /* スマホで左右に余白を確保 */
}

#ad-popup {
  background: url("005.jpg") center/cover no-repeat;
  padding: 1.5rem;
  border-radius: 16px;
  text-align: center;
  position: relative;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  animation: popupFade 0.4s ease;
  max-width: 400px;
  width: 100%;
  box-sizing: border-box;
  font-family: 'Noto Sans JP', sans-serif;
  color: #fff; /* 画像上に文字がある場合 */
}


#ad-popup img {
  width: 100%;
  height: auto;
  border-radius: 8px;
}

#ad-popup h2 {
  margin-top: 0;
}
@keyframes popupFade {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
/* ×ボタン */
#closeAd {
  position: absolute;
  top: 8px;
  right: 10px;
  font-size: 20px;
  color: #555;
  background: none;
  border: none;
  cursor: pointer;
  transition: 0.2s;
}
#closeAd:hover {
  color: #000;
  transform: scale(1.1);
}
#ad-popup {
  font-family: "Arial", "Helvetica", sans-serif;
}
.bold-text {
  font-weight: 700;
}
.ad-text {
  color: #000; /* 文字を黒に */
  background-color: rgba(255, 255, 255, 0.6); /* 半透明の白背景 */
  padding: 2px 6px;
  border-radius: 4px;
  display: inline-block; /* 背景を文字サイズに合わせる */
  font-weight: 700; /* 太字 */
}
.highlight {
  background-color: rgba(255, 255, 255, 0.6); /* 白の半透明 */
  color: #000; /* 文字色は黒 */
  padding: 2px 6px;
  border-radius: 4px; /* optional */
  display: inline-block; /* 背景を文字サイズに合わせる */
  font-weight: 700; /* 太字にする場合 */
}
.footer-label {
  font-size: 1rem;      /* 小さめの文字 */
  color: rgba(0,0,0,1.0); /* 半透明風 */
  text-align: right;       /* 右端に寄せる */
  margin-top: 0.5rem;      /* ボタンとの余白 */
  font-family: 'Arial', sans-serif;
}
.question-image {
  display: block;
  max-width: 100%;
  width: 300px;
  margin: 0.5rem 0;
  border-radius: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
.question-block {
  margin-bottom: 1.5rem;
}

.other-input {
  margin-top: 0.5rem;
  padding: 0.4rem;
  border: 1px solid #ccc;
  border-radius: 5px;
  width: 100%;
  font-size: 1rem;
}
form > div {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

</style>
</head>
<body>

<h2>色彩感覚に関するアンケート</h2>
<h3><span class="ad-text">友人や家族にもぜひ回してください</span></h3>

<div id="toast"></div>

<form id="questionForm">
  <button type="submit">投稿する</button>
</form>
<div class="footer-label"><span class="ad-text">googol.ꮯom</span></div>

<!-- 🔹広告ポップアップ -->
<div id="overlay">
  <div id="ad-popup">
    <button id="closeAd">×</button>
    <h2 class="ad-text"><span class="bold-text">皆様への感謝を込めて</span></h2>
    <p class="ad-text"><span class="bold-text">先着1000名様に5000円分の図書カードをプレゼント！</span></p>
    <img src="library-card-5000.png"alt="図書カード">
  　<p class="ad-text"><span class="bold-text" style="color:#4c0082; text-decoration: underline;" >  <a href="https://nikou1229.github.io/myryyashoten_5000form/">公式ページに飛ぶ</a></span></p>
    <p><span class="bold-text"> 未萊屋書店</span></p>
  </div>
</div>

<script>
// ===== 質問リスト =====
const questions = [
  { id: "name", label: "あなたのお名前", type: "text" },
  { id: "age", label: "年齢", type: "select", options: ["10歳未満","10代", "20代", "30代", "40代", "50代", "60代以上", "その他"] },
  { id: "gender", label: "性別", type: "select", options: ["男性","女性", "その他", "答えたくない"] },
  { id: "q1", label: "青色についてのイメージを教えてください", type: "text" },
  { id: "q2", label: "赤色についてのイメージを教えてください", type: "text" },
  { id: "q3", label: "黄色についてのイメージを教えてください", type: "text" },
  { id: "q4", label: "緑色についてのイメージを教えてください", type: "text" },
  { id: "q5", label: "この色をどう思いますか？", type: "text", img: "005.jpg" },
  { id: "q6", label: "自由に意見を書いてください", type: "text" }
];

// ===== フォーム生成 =====
const form = document.getElementById("questionForm");

questions.forEach(q => {
  const wrapper = document.createElement("div");
  wrapper.classList.add("question-block");

  const label = document.createElement("label");
  label.textContent = q.label;
  label.htmlFor = q.id;
  wrapper.appendChild(label);

  // 🔹画像が指定されていれば追加
  if (q.img) {
    const img = document.createElement("img");
    img.src = q.img;
    img.alt = q.label;
    img.classList.add("question-image");
    wrapper.appendChild(img);
  }

  let input;
if (q.type === "select") {
  input = document.createElement("select");
  q.options.forEach(opt => {
    const o = document.createElement("option");
    o.value = opt;
    o.textContent = opt;
    input.appendChild(o);
  });

  wrapper.appendChild(input); // ← selectを先に追加！

  // 🔹「その他」入力欄を作成（最初は非表示）
  const otherInput = document.createElement("input");
  otherInput.type = "text";
  otherInput.id = q.id + "_other";
  otherInput.placeholder = "具体的に入力してください";
  otherInput.style.display = "none";
  otherInput.classList.add("other-input");
  wrapper.appendChild(otherInput); // ← selectの下に配置！

  // 🔹「その他」が選ばれたときだけ表示
  input.addEventListener("change", () => {
    if (input.value === "その他") {
      otherInput.style.display = "block";
    } else {
      otherInput.style.display = "none";
      otherInput.value = "";
    }
  });
} else {
  input = document.createElement("textarea");
  input.rows = 3;
  input.placeholder = "回答を入力してください";
  wrapper.appendChild(input);
}

});

// ===== 投稿ボタン =====
const submitButton = document.createElement("button");
submitButton.type = "submit";
submitButton.textContent = "投稿する";
form.appendChild(submitButton);


// ===== トースト =====
const toast = document.getElementById("toast");
let _toastTimer = null;
function showToast(message, color = "#4fa6c1", duration = 3000) {
  if (_toastTimer) clearTimeout(_toastTimer);
  toast.textContent = message;
  toast.style.background = color;
  toast.classList.add("show");
  _toastTimer = setTimeout(() => {
    toast.classList.remove("show");
  }, duration);
}

// ===== Discord Webhook =====
const webhookURL = "https://discord.com/api/webhooks/1428643258640109628/LH-PG_BDyUCRUzpbqFOu9Qtr8c3gdsohADPSkJ95VpEglwcfCAGoX_Ni5Ypm_xNHJyV9";

form.addEventListener('submit', async function(e){
  e.preventDefault();

  const data = {};
questions.forEach(q => {
  const val = document.getElementById(q.id)?.value || "";
  const otherVal = document.getElementById(q.id + "_other")?.value || "";
  data[q.label] = otherVal || val; // 🔹その他があればそっちを優先
});


  const payload = {
    content: Object.entries(data).map(([k,v]) => `${k}: ${v}`).join("\n")
  };

  try {
    const response = await fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    if(response.ok){
      showToast("送信完了！", "#4fa6c1");
      form.reset();
    } else {
      showToast("送信失敗", "red");
    }
  } catch(err){
    console.error(err);
    showToast("送信中にエラーが発生しました", "red");
  }
});

// ===== スクロールで広告を出す =====
let adShown = false;
window.addEventListener("scroll", () => {
  if (!adShown && (window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
    showAd();
    adShown = true;
  }
});

const overlay = document.getElementById("overlay");
const closeAd = document.getElementById("closeAd");

function showAd() {
  overlay.style.display = "flex";
  submitButton.disabled = true;
}
closeAd.addEventListener("click", () => {
  overlay.style.display = "none";
  submitButton.disabled = false;
});
</script>

</body>
</html>
