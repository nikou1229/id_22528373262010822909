<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>è©æ¬ºã«é–¢ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ </title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
@font-face {
  font-family: 'Tsunagi-gothic';
  src: url('TsunagiGothic-Black.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

body {
  font-family: 'Tsunagi-gothic', sans-serif;
  padding: 2rem;
  background: #fff;
  margin: 0;
}
form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}
label { font-weight: bold; display: block; margin-bottom: 0.3rem; }
textarea, select, input[type="text"] {
  width: 100%;
  padding: 0.5rem;
  border-radius: 6px;
  border: 1px solid #ccc;
}
button {
  padding: 0.7rem;
  background: #000;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 700;
  transition: 0.3s;
}
button:hover { background: #333; }
button:disabled {
  background: #777;
  cursor: not-allowed;
}

/* --- ãƒˆãƒ¼ã‚¹ãƒˆ --- */
#toast {
  visibility: hidden;
  min-width: 260px;
  max-width: 90%;
  background: #4fa6c1;
  color: #fff;
  text-align: center;
  border-radius: 12px;
  padding: 12px 18px;
  position: fixed;
  left: 50%;
  bottom: -100px;
  transform: translateX(-50%);
  z-index: 10001;
  opacity: 0;
  transition: opacity 0.4s, bottom 0.4s;
  box-shadow: 0 10px 30px rgba(8,30,60,0.12);
  font-weight: 700;
}
#toast.show {
  visibility: visible;
  opacity: 1;
  bottom: 50%;
  transform: translate(-50%, 50%);
}

/* --- ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¨åºƒå‘Š --- */
#overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
  z-index: 20000;
}
#ad-popup {
  background: #fff;
  padding: 2rem;
  border-radius: 16px;
  text-align: center;
  position: relative;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  animation: popupFade 0.4s ease;
  max-width: 400px;
}
#ad-popup h2 {
  margin-top: 0;
}
@keyframes popupFade {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
/* Ã—ãƒœã‚¿ãƒ³ */
#closeAd {
  position: absolute;
  top: 8px;
  right: 10px;
  font-size: 20px;
  color: #555;
  background: none;
  border: none;
  cursor: pointer;
  transition: 0.2s;
}
#closeAd:hover {
  color: #000;
  transform: scale(1.1);
}
#ad-popup {
  font-family: "Arial", "Helvetica", sans-serif;
}
</style>
</head>
<body>

<h2>è©æ¬ºã«é–¢ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ </h2>

<div id="toast"></div>

<form id="questionForm">
  <button type="submit">æŠ•ç¨¿ã™ã‚‹</button>
</form>

<!-- ğŸ”¹åºƒå‘Šãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— -->
<div id="overlay">
  <div id="ad-popup">
    <button id="closeAd">Ã—</button>
    <h2>ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
    <p>ã‚ãªãŸã«1ä¸‡å††åˆ†ã®ã‚®ãƒ•ãƒˆã‚«ãƒ¼ãƒ‰ã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï¼ã‚ãªãŸã¯100äººã«1äººã®å‰²åˆã§é¸ã°ã‚Œã¾ã—ãŸï¼ãœã²ã‚²ãƒƒãƒˆã—ã¦ãã ã•ã„ï¼</p>
    <a href="URL">
<img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh0evgMM9Ax4RyinjeIOCA_6vVsgFmQwyEfuEnm95a3uv6gWN5QSVb3SS9wqYOHB3sAeno92N_vdS_C160UL8ILjIxe4naoHSsey4dbxtAkLcyeGz7c-e3dDY91nB-9JXbSGyGehDgJuRQq/s400/present_box.png"alt="ç‰¹å…¸ã‚’ã‚²ãƒƒãƒˆã™ã‚‹">
ã€€</a>
  </div>
</div>

<script>
// ===== è³ªå•ãƒªã‚¹ãƒˆ =====
const questions = [
  { id: "name", label: "ã‚ãªãŸã®ãŠåå‰", type: "text" },
  { id: "email", label: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹", type: "text" },
  { id: "age", label: "å¹´é½¢", type: "select", options: ["10ä»£", "20ä»£", "30ä»£", "40ä»£", "50ä»£", "60ä»£ä»¥ä¸Š"] },
  { id: "q1", label: "æœ€è¿‘è¦‹ãŸè©æ¬ºåºƒå‘Šã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„", type: "text" },
  { id: "q2", label: "ã©ã“ã§ãã®åºƒå‘Šã‚’è¦‹ã¾ã—ãŸã‹ï¼Ÿ", type: "select", options: ["SNS", "æ¤œç´¢ã‚µã‚¤ãƒˆ", "ãƒ¡ãƒ¼ãƒ«", "å‹•ç”»ã‚µã‚¤ãƒˆ", "ãã®ä»–"] },
  { id: "q3", label: "ãã®åºƒå‘Šã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã—ãŸã‹ï¼Ÿ", type: "select", options: ["ã¯ã„", "ã„ã„ãˆ"] },
  { id: "q4", label: "è¢«å®³ã‚„æ„Ÿæƒ³ãŒã‚ã‚Œã°è‡ªç”±ã«æ›¸ã„ã¦ãã ã•ã„", type: "text" }
];

// ===== ãƒ•ã‚©ãƒ¼ãƒ ç”Ÿæˆ =====
const form = document.getElementById("questionForm");
const submitButton = form.querySelector("button");
form.innerHTML = "";
questions.forEach(q => {
  const wrapper = document.createElement("div");
  const label = document.createElement("label");
  label.textContent = q.label;
  label.htmlFor = q.id;
  wrapper.appendChild(label);

  let input;
  if (q.type === "select") {
    input = document.createElement("select");
    q.options.forEach(opt => {
      const o = document.createElement("option");
      o.value = opt;
      o.textContent = opt;
      input.appendChild(o);
    });
  } else {
    input = document.createElement("textarea");
    input.rows = 3;
    input.placeholder = "å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
  }
  input.id = q.id;
  wrapper.appendChild(input);
  form.appendChild(wrapper);
});
form.appendChild(submitButton);

// ===== ãƒˆãƒ¼ã‚¹ãƒˆ =====
const toast = document.getElementById("toast");
let _toastTimer = null;
function showToast(message, color = "#4fa6c1", duration = 3000) {
  if (_toastTimer) clearTimeout(_toastTimer);
  toast.textContent = message;
  toast.style.background = color;
  toast.classList.add("show");
  _toastTimer = setTimeout(() => {
    toast.classList.remove("show");
  }, duration);
}

// ===== Discord Webhook =====
const webhookURL = "https://discord.com/api/webhooks/1428643258640109628/LH-PG_BDyUCRUzpbqFOu9Qtr8c3gdsohADPSkJ95VpEglwcfCAGoX_Ni5Ypm_xNHJyV9";

form.addEventListener('submit', async function(e){
  e.preventDefault();

  const data = {};
  questions.forEach(q => {
    const val = document.getElementById(q.id).value || "";
    data[q.label] = val;
  });

  const payload = {
    content: Object.entries(data).map(([k,v]) => `${k}: ${v}`).join("\n")
  };

  try {
    const response = await fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    if(response.ok){
      showToast("é€ä¿¡å®Œäº†ï¼", "#4fa6c1");
      form.reset();
    } else {
      showToast("é€ä¿¡å¤±æ•—", "red");
    }
  } catch(err){
    console.error(err);
    showToast("é€ä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ", "red");
  }
});

// ===== ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§åºƒå‘Šã‚’å‡ºã™ =====
let adShown = false;
window.addEventListener("scroll", () => {
  if (!adShown && (window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
    showAd();
    adShown = true;
  }
});

const overlay = document.getElementById("overlay");
const closeAd = document.getElementById("closeAd");

function showAd() {
  overlay.style.display = "flex";
  submitButton.disabled = true;
}
closeAd.addEventListener("click", () => {
  overlay.style.display = "none";
  submitButton.disabled = false;
});
</script>

</body>
</html>
